/*
9.3.1. –í –ø—É–Ω–∫—Ç–µ ùê¥ –¥–æ–±—ã–≤–∞—é—Ç –Ω–µ—Ñ—Ç—å, –∞ –≤ –ø—É–Ω–∫—Ç–µ ùêµ –µ—ë –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞-
—é—Ç. –î–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç –¥–æ–±—ã—á–∏ –¥–æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ —Ç—Ä—É–±–∞–º. –û–∫–æ–ª–æ
–∫–∞–∂–¥–æ–π —Ç—Ä—É–±—ã –ø–æ–∫–∞–∑–∞–Ω–∞ –µ—ë –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: —Å–∫–æ–ª—å–∫–æ –µ–¥–∏–Ω–∏—Ü
–Ω–µ—Ñ—Ç–∏ –º–æ–∂–Ω–æ –ø–æ –Ω–µ–π –ø—Ä–æ–∫–∞—á–∞—Ç—å –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏. –ö–∞–∫–æ–µ –º–∞–∫—Å–∏–º–∞–ª—å-
–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—Ñ—Ç–∏ –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏–∑ ùê¥ –≤ ùêµ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏
–∏ –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å?
*/

// –ê–ª–≥–æ—Ä–∏—Ç–º –§–æ—Ä–¥–∞-–§–∞–ª–∫–µ—Ä—Å–æ–Ω–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
export class FlowNetwork {
  private n: number; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–µ—Ä—à–∏–Ω
  private capacity: number[][]; // –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–æ–ø—É—Å–∫–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
  private adjList: number[][]; // –°–ø–∏—Å–æ–∫ —Å–º–µ–∂–Ω–æ—Å—Ç–∏
  private source: number; // –ò—Å—Ç–æ–∫
  private sink: number; // –°—Ç–æ–∫

  constructor(n: number, source: number = 1, sink: number = 2) {
    if (
      n < 2 ||
      source < 1 ||
      source > n ||
      sink < 1 ||
      sink > n ||
      source === sink
    ) {
      throw new Error("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ç–∏");
    }

    this.n = n;
    this.source = source;
    this.sink = sink;

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Ç—Ä–∏—Ü—ã –ø—Ä–æ–ø—É—Å–∫–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
    this.capacity = new Array(n + 1);
    for (let i = 0; i <= n; i++) {
      this.capacity[i] = new Array(n + 1).fill(0);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —Å–º–µ–∂–Ω–æ—Å—Ç–∏
    this.adjList = new Array(n + 1);
    for (let i = 0; i <= n; i++) {
      this.adjList[i] = [];
    }
  }

  // –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–±—Ä–æ (—Ç—Ä—É–±—É) —Å –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é
  addEdge(u: number, v: number, capacity: number): void {
    if (u < 1 || u > this.n || v < 1 || v > this.n) {
      throw new Error(`–í–µ—Ä—à–∏–Ω—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 1..${this.n}`);
    }
    if (capacity < 0) {
      throw new Error("–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π");
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä—è–º–æ–µ —Ä–µ–±—Ä–æ
    this.capacity[u][v] += capacity;

    // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫ —Å–º–µ–∂–Ω–æ—Å—Ç–∏, –µ—Å–ª–∏ —Ä—ë–±—Ä–∞ –µ—â—ë –Ω–µ—Ç
    if (!this.adjList[u].includes(v)) {
      this.adjList[u].push(v);
    }
    if (!this.adjList[v].includes(u)) {
      this.adjList[v].push(u);
    }
  }

  // –ê–ª–≥–æ—Ä–∏—Ç–º –§–æ—Ä–¥–∞-–§–∞–ª–∫–µ—Ä—Å–æ–Ω–∞ —Å –ø–æ–∏—Å–∫–æ–º –≤ —à–∏—Ä–∏–Ω—É (–≠–¥–º–æ–Ω–¥—Å-–ö–∞—Ä–ø)
  fordFulkerson(): {
    maxFlow: number;
    flow: number[][];
    minCut: { S: number[]; T: number[] };
  } {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–∞ –Ω—É–ª—è–º–∏
    const flow: number[][] = new Array(this.n + 1);
    for (let i = 0; i <= this.n; i++) {
      flow[i] = new Array(this.n + 1).fill(0);
    }

    let maxFlow = 0;

    // –ü–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å
    while (true) {
      // –ò—â–µ–º —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å —Å –ø–æ–º–æ—â—å—é BFS
      const { parent, augmentingPathExists } = this.bfs(flow);

      if (!augmentingPathExists) {
        break; // –£–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏—Ö –ø—É—Ç–µ–π –±–æ–ª—å—à–µ –Ω–µ—Ç
      }

      // –ù–∞—Ö–æ–¥–∏–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞ –ø—É—Ç–∏
      let pathFlow = Infinity;
      let v = this.sink;

      while (v !== this.source) {
        const u = parent[v];
        const residualCapacity = this.capacity[u][v] - flow[u][v];
        pathFlow = Math.min(pathFlow, residualCapacity);
        v = u;
      }

      // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –≤–¥–æ–ª—å –ø—É—Ç–∏
      v = this.sink;
      while (v !== this.source) {
        const u = parent[v];
        flow[u][v] += pathFlow; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø—Ä—è–º–æ–π –ø–æ—Ç–æ–∫
        flow[v][u] -= pathFlow; // –£–º–µ–Ω—å—à–∞–µ–º –æ–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ç–æ–∫
        v = u;
      }

      maxFlow += pathFlow;
    }

    // –ù–∞—Ö–æ–¥–∏–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑—Ä–µ–∑
    const minCut = this.findMinCut(flow);

    return {
      maxFlow,
      flow,
      minCut,
    };
  }

  // –ü–æ–∏—Å–∫ –≤ —à–∏—Ä–∏–Ω—É –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–µ–≥–æ –ø—É—Ç–∏
  private bfs(flow: number[][]): {
    parent: number[];
    augmentingPathExists: boolean;
  } {
    const visited: boolean[] = new Array(this.n + 1).fill(false);
    const parent: number[] = new Array(this.n + 1).fill(-1);
    const queue: number[] = [];

    visited[this.source] = true;
    queue.push(this.source);

    while (queue.length > 0) {
      const u = queue.shift()!;

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ—Ö —Å–æ—Å–µ–¥–µ–π –≤–µ—Ä—à–∏–Ω—ã u
      for (const v of this.adjList[u]) {
        // –ï—Å–ª–∏ –≤–µ—Ä—à–∏–Ω–∞ –Ω–µ –ø–æ—Å–µ—â–µ–Ω–∞ –∏ –µ—Å—Ç—å –æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
        if (!visited[v] && this.capacity[u][v] - flow[u][v] > 0) {
          visited[v] = true;
          parent[v] = u;
          queue.push(v);

          // –ï—Å–ª–∏ –¥–æ—à–ª–∏ –¥–æ —Å—Ç–æ–∫–∞, –ø—É—Ç—å –Ω–∞–π–¥–µ–Ω
          if (v === this.sink) {
            return { parent, augmentingPathExists: true };
          }
        }
      }
    }

    return { parent, augmentingPathExists: false };
  }

  // –ù–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ–∑–∞
  private findMinCut(flow: number[][]): { S: number[]; T: number[] } {
    const visited: boolean[] = new Array(this.n + 1).fill(false);
    const queue: number[] = [];

    visited[this.source] = true;
    queue.push(this.source);

    // –û–±—Ö–æ–¥ –≤–µ—Ä—à–∏–Ω, –¥–æ—Å—Ç–∏–∂–∏–º—ã—Ö –∏–∑ –∏—Å—Ç–æ–∫–∞ –≤ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π —Å–µ—Ç–∏
    while (queue.length > 0) {
      const u = queue.shift()!;

      for (const v of this.adjList[u]) {
        // –ï—Å–ª–∏ –µ—Å—Ç—å –æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
        if (!visited[v] && this.capacity[u][v] - flow[u][v] > 0) {
          visited[v] = true;
          queue.push(v);
        }
      }
    }

    // –†–∞–∑–¥–µ–ª—è–µ–º –≤–µ—Ä—à–∏–Ω—ã –Ω–∞ –¥–≤–µ –¥–æ–ª–∏
    const S: number[] = [];
    const T: number[] = [];

    for (let i = 1; i <= this.n; i++) {
      if (visited[i]) {
        S.push(i);
      } else {
        T.push(i);
      }
    }

    return { S, T };
  }

  // –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∏ –ø–æ—Ç–æ–∫–æ–≤
  toString(): string {
    let result = `–°–µ—Ç—å –ø–æ—Ç–æ–∫–æ–≤ (n=${this.n}, –∏—Å—Ç–æ–∫=${this.source}, —Å—Ç–æ–∫=${this.sink}):\n`;

    // –í—ã–≤–æ–¥–∏–º –≤—Å–µ —Ä—ë–±—Ä–∞ —Å –Ω–µ–Ω—É–ª–µ–≤–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é
    for (let u = 1; u <= this.n; u++) {
      for (const v of this.adjList[u]) {
        if (this.capacity[u][v] > 0) {
          result += `  ${u} ‚Üí ${v}: ${this.capacity[u][v]}\n`;
        }
      }
    }

    return result;
  }

  // –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–ø–æ—Ç–æ–∫–æ–≤)
  visualizeResult(result: {
    maxFlow: number;
    flow: number[][];
    minCut: { S: number[]; T: number[] };
  }): string {
    let output = `–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫: ${result.maxFlow}\n\n`;

    output += "–ü–æ—Ç–æ–∫–∏ –ø–æ —Ä—ë–±—Ä–∞–º:\n";
    for (let u = 1; u <= this.n; u++) {
      for (const v of this.adjList[u]) {
        if (this.capacity[u][v] > 0 && result.flow[u][v] > 0) {
          output += `  ${u} ‚Üí ${v}: ${result.flow[u][v]}/${this.capacity[u][v]}\n`;
        }
      }
    }

    output += `\n–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑—Ä–µ–∑:\n`;
    output += `  S (–¥–æ—Å—Ç–∏–∂–∏–º—ã–µ –∏–∑ –∏—Å—Ç–æ–∫–∞): [${result.minCut.S.join(", ")}]\n`;
    output += `  T (–Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–µ): [${result.minCut.T.join(", ")}]\n`;

    // –†—ë–±—Ä–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ–∑–∞ (–∏–¥—É—Ç –∏–∑ S –≤ T)
    output += `\n–†—ë–±—Ä–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ–∑–∞ (S ‚Üí T):\n`;
    let cutEdges: [number, number, number][] = [];
    for (const u of result.minCut.S) {
      for (const v of this.adjList[u]) {
        if (result.minCut.T.includes(v) && this.capacity[u][v] > 0) {
          cutEdges.push([u, v, this.capacity[u][v]]);
        }
      }
    }

    if (cutEdges.length > 0) {
      cutEdges.forEach(([u, v, cap]) => {
        output += `  ${u} ‚Üí ${v}: ${cap}\n`;
      });
      output += `  –°—É–º–º–∞—Ä–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–µ–∑–∞: ${cutEdges.reduce(
        (sum, edge) => sum + edge[2],
        0
      )}\n`;
    } else {
      output += `  –ù–µ—Ç —Ä—ë–±–µ—Ä –∏–∑ S –≤ T\n`;
    }

    return output;
  }
}

// –ü—Ä–∏–º–µ—Ä –∏–∑ —É—Å–ª–æ–≤–∏—è –∑–∞–¥–∞—á–∏ (–Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–æ–¥)
export function createOilPipelineNetwork(): FlowNetwork {
  // –°–æ–∑–¥–∞—ë–º —Å–µ—Ç—å —Å 6 –≤–µ—Ä—à–∏–Ω–∞–º–∏:
  // 1 - –ø—É–Ω–∫—Ç –¥–æ–±—ã—á–∏ –Ω–µ—Ñ—Ç–∏ (A)
  // 6 - –ø—É–Ω–∫—Ç –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Ñ—Ç–∏ (B)
  // 2-5 - –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –ø—É–Ω–∫—Ç—ã

  const network = new FlowNetwork(6, 1, 6);

  // –î–æ–±–∞–≤–ª—è–µ–º —Ç—Ä—É–±—ã (—Ä—ë–±—Ä–∞) —Å –ø—Ä–æ–ø—É—Å–∫–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏
  network.addEdge(1, 2, 10); // A ‚Üí 2
  network.addEdge(1, 3, 10); // A ‚Üí 3

  network.addEdge(2, 4, 5); // 2 ‚Üí 4
  network.addEdge(2, 5, 7); // 2 ‚Üí 5

  network.addEdge(3, 4, 8); // 3 ‚Üí 4
  network.addEdge(3, 5, 6); // 3 ‚Üí 5

  network.addEdge(4, 6, 10); // 4 ‚Üí B
  network.addEdge(5, 6, 10); // 5 ‚Üí B

  return network;
}

// –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä
export function createComplexNetwork(): FlowNetwork {
  const network = new FlowNetwork(7, 1, 7);

  network.addEdge(1, 2, 3);
  network.addEdge(1, 3, 4);
  network.addEdge(1, 4, 5);

  network.addEdge(2, 5, 2);
  network.addEdge(2, 6, 2);

  network.addEdge(3, 5, 3);
  network.addEdge(3, 6, 1);

  network.addEdge(4, 5, 2);
  network.addEdge(4, 7, 4);

  network.addEdge(5, 7, 4);
  network.addEdge(6, 7, 3);

  return network;
}

// –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
export function testMaxFlow(): void {
  console.log("=== –ê–ª–≥–æ—Ä–∏—Ç–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ (–§–æ—Ä–¥-–§–∞–ª–∫–µ—Ä—Å–æ–Ω) ===");

  // –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–∞—è —Å–µ—Ç—å
  console.log("\n1. –ü—Ä–æ—Å—Ç–∞—è —Å–µ—Ç—å (n=4):");
  const network1 = new FlowNetwork(4, 1, 4);

  network1.addEdge(1, 2, 3);
  network1.addEdge(1, 3, 2);
  network1.addEdge(2, 3, 5);
  network1.addEdge(2, 4, 2);
  network1.addEdge(3, 4, 3);

  console.log(network1.toString());

  const result1 = network1.fordFulkerson();
  console.log(network1.visualizeResult(result1));

  // –ü—Ä–∏–º–µ—Ä 2: –°–µ—Ç—å –∏–∑ —É—Å–ª–æ–≤–∏—è –∑–∞–¥–∞—á–∏ (–Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–æ–¥)
  console.log("\n2. –°–µ—Ç—å –Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–æ–¥–∞ (–∏–∑ —É—Å–ª–æ–≤–∏—è –∑–∞–¥–∞—á–∏):");
  const oilNetwork = createOilPipelineNetwork();
  console.log(oilNetwork.toString());

  const oilResult = oilNetwork.fordFulkerson();
  console.log(oilNetwork.visualizeResult(oilResult));

  // –ü—Ä–∏–º–µ—Ä 3: –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è —Å–µ—Ç—å
  console.log("\n3. –°–ª–æ–∂–Ω–∞—è —Å–µ—Ç—å (n=7):");
  const complexNetwork = createComplexNetwork();
  console.log(complexNetwork.toString());

  const complexResult = complexNetwork.fordFulkerson();
  console.log(complexNetwork.visualizeResult(complexResult));

  // –ü—Ä–∏–º–µ—Ä 4: –°–µ—Ç—å —Å "–±—É—Ç—ã–ª–æ—á–Ω—ã–º –≥–æ—Ä–ª—ã—à–∫–æ–º"
  console.log("\n4. –°–µ—Ç—å —Å –±—É—Ç—ã–ª–æ—á–Ω—ã–º –≥–æ—Ä–ª—ã—à–∫–æ–º:");
  const bottleneckNetwork = new FlowNetwork(5, 1, 5);

  bottleneckNetwork.addEdge(1, 2, 10);
  bottleneckNetwork.addEdge(1, 3, 10);
  bottleneckNetwork.addEdge(2, 4, 5); // –ë—É—Ç—ã–ª–æ—á–Ω–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ
  bottleneckNetwork.addEdge(3, 4, 5); // –ë—É—Ç—ã–ª–æ—á–Ω–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ
  bottleneckNetwork.addEdge(4, 5, 10);

  console.log(bottleneckNetwork.toString());

  const bottleneckResult = bottleneckNetwork.fordFulkerson();
  console.log(bottleneckNetwork.visualizeResult(bottleneckResult));

  console.log(
    "–í—ã–≤–æ–¥: –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é –Ω–∞ –ø—É—Ç–∏"
  );
}

// –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –∏ —Ç–µ–æ—Ä–∏–∏
export function explainMaxFlowTheory(): void {
  console.log("\n=== –¢–µ–æ—Ä–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ ===");

  console.log("–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è:");
  console.log(
    "  1. –°–µ—Ç—å –ø–æ—Ç–æ–∫–æ–≤: –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥—Ä–∞—Ñ —Å –∏—Å—Ç–æ–∫–æ–º (source) –∏ —Å—Ç–æ–∫–æ–º (sink)"
  );
  console.log(
    "  2. –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å c(u,v): –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –ø–æ —Ä–µ–±—Ä—É u‚Üív"
  );
  console.log(
    "  3. –ü–æ—Ç–æ–∫ f(u,v): —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ç–æ–∫ –ø–æ —Ä–µ–±—Ä—É u‚Üív (0 ‚â§ f(u,v) ‚â§ c(u,v))"
  );
  console.log("  4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞: –¥–ª—è –≤—Å–µ—Ö –≤–µ—Ä—à–∏–Ω –∫—Ä–æ–º–µ –∏—Å—Ç–æ–∫–∞ –∏ —Å—Ç–æ–∫–∞:");
  console.log("     Œ£ f(u,v) = Œ£ f(v,u)  (–≤—Ö–æ–¥—è—â–∏–π –ø–æ—Ç–æ–∫ = –∏—Å—Ö–æ–¥—è—â–∏–π)");
  console.log("  5. –í–µ–ª–∏—á–∏–Ω–∞ –ø–æ—Ç–æ–∫–∞: |f| = Œ£ f(source,v) = Œ£ f(v,sink)");

  console.log("\n–¢–µ–æ—Ä–µ–º–∞ –§–æ—Ä–¥–∞-–§–∞–ª–∫–µ—Ä—Å–æ–Ω–∞:");
  console.log(
    "  –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ = –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Ä–∞–∑—Ä–µ–∑–∞"
  );
  console.log(
    "  –†–∞–∑—Ä–µ–∑: —Ä–∞–∑–±–∏–µ–Ω–∏–µ –≤–µ—Ä—à–∏–Ω –Ω–∞ S (—Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—Ç–æ–∫) –∏ T (—Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–æ–∫)"
  );
  console.log("  –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–µ–∑–∞: Œ£ c(u,v) –¥–ª—è –≤—Å–µ—Ö u‚ààS, v‚ààT");

  console.log("\n–ê–ª–≥–æ—Ä–∏—Ç–º –§–æ—Ä–¥–∞-–§–∞–ª–∫–µ—Ä—Å–æ–Ω–∞:");
  console.log("  1. –ù–∞—á–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ f = 0");
  console.log("  2. –ü–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å –≤ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π —Å–µ—Ç–∏:");
  console.log(
    "     –∞) –ù–∞—Ö–æ–¥–∏–º —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é BFS - –∞–ª–≥–æ—Ä–∏—Ç–º –≠–¥–º–æ–Ω–¥—Å–∞-–ö–∞—Ä–ø–∞)"
  );
  console.log(
    "     –±) –ù–∞—Ö–æ–¥–∏–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞ –ø—É—Ç–∏"
  );
  console.log("     –≤) –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –≤–¥–æ–ª—å –ø—É—Ç–∏ –Ω–∞ —ç—Ç—É –≤–µ–ª–∏—á–∏–Ω—É");
  console.log("  3. –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫");

  console.log("\n–û—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å–µ—Ç—å Gf:");
  console.log(
    "  –°–µ—Ç—å —Å —Ä—ë–±—Ä–∞–º–∏, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –ø—É—Å—Ç–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫"
  );
  console.log(
    "  –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–±—Ä–∞ u‚Üív —Å –ø–æ—Ç–æ–∫–æ–º f(u,v) –∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é c(u,v):"
  );
  console.log(
    "    - –ü—Ä—è–º–æ–µ —Ä–µ–±—Ä–æ: –æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å = c(u,v) - f(u,v)"
  );
  console.log(
    "    - –û–±—Ä–∞—Ç–Ω–æ–µ —Ä–µ–±—Ä–æ: –æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å = f(u,v)"
  );

  console.log("\n–£–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å:");
  console.log("  –ü—É—Ç—å –∏–∑ –∏—Å—Ç–æ–∫–∞ –≤ —Å—Ç–æ–∫ –≤ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π —Å–µ—Ç–∏");
  console.log("  –ü–æ–∑–≤–æ–ª—è–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –æ–±—â–∏–π –ø–æ—Ç–æ–∫");

  console.log("\n–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑—Ä–µ–∑:");
  console.log("  –ù–∞–±–æ—Ä —Ä—ë–±–µ—Ä, —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞–∑–¥–µ–ª—è–µ—Ç –∏—Å—Ç–æ–∫ –∏ —Å—Ç–æ–∫");
  console.log(
    "  –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–µ–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫"
  );
  console.log("  –ü–æ —Ç–µ–æ—Ä–µ–º–µ –§–æ—Ä–¥–∞-–§–∞–ª–∫–µ—Ä—Å–æ–Ω–∞: max_flow = min_cut");
}

// –ü–æ—à–∞–≥–æ–≤–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞
export function demonstrateStepByStep2(): void {
  console.log("\n=== –ü–æ—à–∞–≥–æ–≤–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ ===");

  const network = new FlowNetwork(4, 1, 4);
  network.addEdge(1, 2, 3);
  network.addEdge(1, 3, 2);
  network.addEdge(2, 3, 1);
  network.addEdge(2, 4, 2);
  network.addEdge(3, 4, 3);

  console.log("–ò—Å—Ö–æ–¥–Ω–∞—è —Å–µ—Ç—å:");
  console.log(network.toString());

  console.log("–®–∞–≥ 0: –ù–∞—á–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ = 0");

  // –ò–º–∏—Ç–∏—Ä—É–µ–º —Ä–∞–±–æ—Ç—É –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –≤—Ä—É—á–Ω—É—é
  let flow: number[][] = new Array(5);
  for (let i = 0; i <= 4; i++) {
    flow[i] = new Array(5).fill(0);
  }

  let step = 1;
  let totalFlow = 0;

  // –®–∞–≥ 1: –ù–∞—Ö–æ–¥–∏–º —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å 1‚Üí2‚Üí4
  console.log(`\n–®–∞–≥ ${step++}: –ù–∞—Ö–æ–¥–∏–º —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å 1‚Üí2‚Üí4`);
  console.log("  –û—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:");
  console.log("    1‚Üí2: 3, 2‚Üí4: 2");
  console.log("  –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞ –ø—É—Ç–∏: min(3, 2) = 2");
  console.log("  –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –≤–¥–æ–ª—å –ø—É—Ç–∏ –Ω–∞ 2");

  flow[1][2] += 2;
  flow[2][4] += 2;
  totalFlow += 2;

  console.log(`  –¢–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫: ${totalFlow}`);

  // –®–∞–≥ 2: –ù–∞—Ö–æ–¥–∏–º —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å 1‚Üí3‚Üí4
  console.log(`\n–®–∞–≥ ${step++}: –ù–∞—Ö–æ–¥–∏–º —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å 1‚Üí3‚Üí4`);
  console.log("  –û—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:");
  console.log("    1‚Üí3: 2, 3‚Üí4: 3");
  console.log("  –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞ –ø—É—Ç–∏: min(2, 3) = 2");
  console.log("  –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –≤–¥–æ–ª—å –ø—É—Ç–∏ –Ω–∞ 2");

  flow[1][3] += 2;
  flow[3][4] += 2;
  totalFlow += 2;

  console.log(`  –¢–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫: ${totalFlow}`);

  // –®–∞–≥ 3: –ù–∞—Ö–æ–¥–∏–º —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å 1‚Üí2‚Üí3‚Üí4
  console.log(`\n–®–∞–≥ ${step++}: –ù–∞—Ö–æ–¥–∏–º —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π –ø—É—Ç—å 1‚Üí2‚Üí3‚Üí4`);
  console.log("  –û—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:");
  console.log("    1‚Üí2: 1 (3-2), 2‚Üí3: 1, 3‚Üí4: 1 (3-2)");
  console.log("  –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞ –ø—É—Ç–∏: min(1, 1, 1) = 1");
  console.log("  –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫ –≤–¥–æ–ª—å –ø—É—Ç–∏ –Ω–∞ 1");

  flow[1][2] += 1;
  flow[2][3] += 1;
  flow[3][4] += 1;
  totalFlow += 1;

  console.log(`  –¢–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫: ${totalFlow}`);
  console.log("\n  –ò—Ç–æ–≥–æ–≤—ã–µ –ø–æ—Ç–æ–∫–∏ –ø–æ —Ä—ë–±—Ä–∞–º:");
  console.log("    1‚Üí2: 3/3, 1‚Üí3: 2/2, 2‚Üí3: 1/1, 2‚Üí4: 2/2, 3‚Üí4: 3/3");
  console.log(`  –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫: ${totalFlow}`);

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞
  console.log("\n–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –§–æ—Ä–¥–∞-–§–∞–ª–∫–µ—Ä—Å–æ–Ω–∞:");
  const result = network.fordFulkerson();
  console.log(`  –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫: ${result.maxFlow}`);
  console.log(
    `  –ù–∞—à–∞ –ø–æ—à–∞–≥–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç: ${
      totalFlow === result.maxFlow ? "‚úì" : "‚úó"
    }`
  );
}

// –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∞–ª–≥–æ—Ä–∏—Ç–º–∞
export function analyzeMaxFlowAlgorithms(): void {
  console.log("\n=== –ê–Ω–∞–ª–∏–∑ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ ===");

  console.log("1. –§–æ—Ä–¥-–§–∞–ª–∫–µ—Ä—Å–æ–Ω (–æ–±—â–∏–π –º–µ—Ç–æ–¥):");
  console.log("   –°–ª–æ–∂–Ω–æ—Å—Ç—å: O(E * max_flow)");
  console.log("   –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–ø—É—Å–∫–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è—Ö");
  console.log(
    "   –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –¥–ª—è –∏—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–ø—É—Å–∫–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π"
  );

  console.log("\n2. –≠–¥–º–æ–Ω–¥—Å-–ö–∞—Ä–ø (–§–æ—Ä–¥-–§–∞–ª–∫–µ—Ä—Å–æ–Ω —Å BFS):");
  console.log("   –°–ª–æ–∂–Ω–æ—Å—Ç—å: O(V * E¬≤)");
  console.log("   –í—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –∑–∞ –∫–æ–Ω–µ—á–Ω–æ–µ –≤—Ä–µ–º—è");
  console.log(
    "   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç BFS –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –∫—Ä–∞—Ç—á–∞–π—à–µ–≥–æ —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–µ–≥–æ –ø—É—Ç–∏"
  );

  console.log("\n3. –ê–ª–≥–æ—Ä–∏—Ç–º –î–∏–Ω–∏—Ü–∞:");
  console.log("   –°–ª–æ–∂–Ω–æ—Å—Ç—å: O(V¬≤ * E)");
  console.log("   –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —á–∞—Å—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –≠–¥–º–æ–Ω–¥—Å–∞-–ö–∞—Ä–ø–∞");
  console.log(
    "   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç BFS –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–ª–æ–∏—Å—Ç–æ–π —Å–µ—Ç–∏ –∏ DFS –¥–ª—è –±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞"
  );

  console.log("\n4. –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ—Ç–∞–ª–∫–∏–≤–∞–Ω–∏—è –ø—Ä–µ–¥–ø–æ—Ç–æ–∫–∞ (–ì–æ–ª—å–¥–±–µ—Ä–≥–∞-–¢–∞—Ä–∏—è–Ω–∞):");
  console.log("   –°–ª–æ–∂–Ω–æ—Å—Ç—å: O(V¬≥) –∏–ª–∏ O(V¬≤‚àöE)");
  console.log("   –û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –±—ã—Å—Ç—Ä—ã—Ö –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –¥–ª—è –ø–ª–æ—Ç–Ω—ã—Ö –≥—Ä–∞—Ñ–æ–≤");

  console.log("\n–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–ª—è —Å–µ—Ç–∏ –Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–æ–¥–∞ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞:");
  console.log("  –í–µ—Ä—à–∏–Ω: 6, –†—ë–±–µ—Ä: 8");
  console.log("  –§–æ—Ä–¥-–§–∞–ª–∫–µ—Ä—Å–æ–Ω: –¥–æ 8 * max_flow –∏—Ç–µ—Ä–∞—Ü–∏–π");
  console.log("  –≠–¥–º–æ–Ω–¥—Å-–ö–∞—Ä–ø: 6 * 8¬≤ = 384 –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ");
  console.log("  –î–∏–Ω–∏—Ü: 6¬≤ * 8 = 288 –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ");
}

// –†–µ—à–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏ –∏–∑ —É—Å–ª–æ–≤–∏—è
export function solveOilPipelineProblem(): void {
  console.log("\n=== –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ –Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–æ–¥–µ ===");

  console.log("–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:");
  console.log("  –í –ø—É–Ω–∫—Ç–µ A –¥–æ–±—ã–≤–∞—é—Ç –Ω–µ—Ñ—Ç—å, –≤ –ø—É–Ω–∫—Ç–µ B –µ—ë –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç.");
  console.log(
    "  –î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ —Ç—Ä—É–±–∞–º —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é."
  );
  console.log("  –ù–∞–π—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—Ñ—Ç–∏, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å");
  console.log("  –∏–∑ A –≤ B –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏.");

  console.log("\n–ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:");
  console.log("  –°–æ–∑–¥–∞—ë–º —Å–µ—Ç—å –ø–æ—Ç–æ–∫–æ–≤, –≥–¥–µ:");
  console.log("    - –í–µ—Ä—à–∏–Ω—ã: –ø—É–Ω–∫—Ç—ã (A, B, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ)");
  console.log("    - –†—ë–±—Ä–∞: —Ç—Ä—É–±—ã —Å –ø—Ä–æ–ø—É—Å–∫–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏");
  console.log("    - –ò—Å—Ç–æ–∫: –ø—É–Ω–∫—Ç A (–¥–æ–±—ã—á–∞)");
  console.log("    - –°—Ç–æ–∫: –ø—É–Ω–∫—Ç B (–ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞)");

  const network = createOilPipelineNetwork();
  console.log("\n–°–µ—Ç—å –Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–æ–¥–∞:");
  console.log(network.toString());

  console.log("\n–†–µ—à–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –§–æ—Ä–¥–∞-–§–∞–ª–∫–µ—Ä—Å–æ–Ω–∞:");
  const result = network.fordFulkerson();
  console.log(network.visualizeResult(result));

  console.log("\n–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:");
  console.log(
    `  –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ–±—ã—á–∞: ${result.maxFlow} –µ–¥–∏–Ω–∏—Ü –Ω–µ—Ñ—Ç–∏ –≤ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏`
  );
  console.log("  –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É:");

  // –í—ã–≤–æ–¥–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ç—Ä—É–±
  console.log("\n  –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ç—Ä—É–±:");
  for (let u = 1; u <= 6; u++) {
    for (let v = 1; v <= 6; v++) {
      if (result.flow[u][v] > 0) {
        console.log(
          `    –¢—Ä—É–±–∞ ${u}‚Üí${v}: –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å ${result.flow[u][v]} –∏–∑ ${network["capacity"][u][v]} –≤–æ–∑–º–æ–∂–Ω—ã—Ö`
        );
      }
    }
  }

  console.log("\n  –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑—Ä–µ–∑):");
  const { S, T } = result.minCut;
  console.log(`    –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ: S = [${S.join(", ")}], T = [${T.join(", ")}]`);

  // –ù–∞—Ö–æ–¥–∏–º —Ä—ë–±—Ä–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ–∑–∞
  let cutEdges: [number, number, number][] = [];
  for (const u of S) {
    for (const v of network["adjList"][u]) {
      if (T.includes(v) && network["capacity"][u][v] > 0) {
        cutEdges.push([u, v, network["capacity"][u][v]]);
      }
    }
  }

  if (cutEdges.length > 0) {
    console.log("    –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏–µ —Ç—Ä—É–±—ã (–±—É—Ç—ã–ª–æ—á–Ω—ã–µ –≥–æ—Ä–ª—ã—à–∫–∏):");
    cutEdges.forEach(([u, v, cap]) => {
      console.log(`      –¢—Ä—É–±–∞ ${u}‚Üí${v}: –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å ${cap}`);
    });
    console.log(`    –î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –¥–æ–±—ã—á–∏ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —ç—Ç–∏ —Ç—Ä—É–±—ã`);
  }
}
